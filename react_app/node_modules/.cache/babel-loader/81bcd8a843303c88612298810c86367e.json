{"ast":null,"code":"var _jsxFileName = \"/Users/bbe/Dev/Module/binance_assignment/src/my_provider.js\";\nimport React from 'react';\nimport MyContext from './my_context.js';\nconst api = '/get-products';\n\nlet recur_foo = (num, data_list, data_dict) => {\n  if (num <= 0) {\n    return data_dict;\n  }\n\n  var temp_l = [];\n  var key = data_list[num - 1]['b'];\n  data_list.forEach(i => {\n    if (i.pm === key) {\n      temp_l.push(i.b);\n    }\n  });\n  data_dict[key] = temp_l;\n  num -= 1;\n  return recur_foo(num, data_list, data_dict);\n};\n\nclass MyProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handle_click = props.callback;\n    this.state = {\n      market_data: [],\n      market_structure: [],\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    fetch(api).then(res => {\n      return res.json();\n    }).then(output => {\n      var api_data = output.data;\n      var num = api_data.length;\n      var data_list = api_data;\n      var data_dict = {};\n      var data = recur_foo(num, data_list, data_dict);\n      this.setState({\n        market_data: api_data,\n        market_structure: data,\n        loaded: true\n      });\n      this.handle_click;\n    });\n  }\n\n  render() {\n    if (this.state.loaded) {\n      return /*#__PURE__*/React.createElement(MyContext.Provider, {\n        value: {\n          data: this.state.market_data\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, this.props.children);\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }\n      }, \" Loading ... \"));\n    }\n  }\n\n}\n\nexport default MyProvider;","map":{"version":3,"sources":["/Users/bbe/Dev/Module/binance_assignment/src/my_provider.js"],"names":["React","MyContext","api","recur_foo","num","data_list","data_dict","temp_l","key","forEach","i","pm","push","b","MyProvider","Component","constructor","props","handle_click","callback","state","market_data","market_structure","loaded","componentDidMount","fetch","then","res","json","output","api_data","data","length","setState","render","children"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AAKA,MAAMC,GAAG,GAAG,eAAZ;;AAEA,IAAIC,SAAS,GAAG,CAACC,GAAD,EAAMC,SAAN,EAAiBC,SAAjB,KAA+B;AAC3C,MAAIF,GAAG,IAAI,CAAX,EAAc;AACV,WAAOE,SAAP;AACH;;AAED,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,GAAG,GAAGH,SAAS,CAACD,GAAG,GAAC,CAAL,CAAT,CAAiB,GAAjB,CAAV;AAEAC,EAAAA,SAAS,CAACI,OAAV,CACIC,CAAC,IAAI;AACD,QAAIA,CAAC,CAACC,EAAF,KAASH,GAAb,EAAkB;AACdD,MAAAA,MAAM,CAACK,IAAP,CAAYF,CAAC,CAACG,CAAd;AACH;AACJ,GALL;AAQAP,EAAAA,SAAS,CAACE,GAAD,CAAT,GAAiBD,MAAjB;AACAH,EAAAA,GAAG,IAAI,CAAP;AACA,SAAOD,SAAS,CAACC,GAAD,EAAMC,SAAN,EAAiBC,SAAjB,CAAhB;AACH,CAnBD;;AAqBA,MAAMQ,UAAN,SAAyBd,KAAK,CAACe,SAA/B,CAAyC;AACrCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,YAAL,GAAoBD,KAAK,CAACE,QAA1B;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,WAAW,EAAE,EADJ;AAETC,MAAAA,gBAAgB,EAAE,EAFT;AAGTC,MAAAA,MAAM,EAAE;AAHC,KAAb;AAKH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChBC,IAAAA,KAAK,CAACvB,GAAD,CAAL,CACCwB,IADD,CAEIC,GAAG,IAAI;AACH,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACH,KAJL,EAMCF,IAND,CAMOG,MAAD,IAAY;AACd,UAAIC,QAAQ,GAAGD,MAAM,CAACE,IAAtB;AACA,UAAI3B,GAAG,GAAG0B,QAAQ,CAACE,MAAnB;AACA,UAAI3B,SAAS,GAAGyB,QAAhB;AACA,UAAIxB,SAAS,GAAG,EAAhB;AACA,UAAIyB,IAAI,GAAG5B,SAAS,CAACC,GAAD,EAAMC,SAAN,EAAiBC,SAAjB,CAApB;AACA,WAAK2B,QAAL,CAAc;AACVZ,QAAAA,WAAW,EAAES,QADH;AAEVR,QAAAA,gBAAgB,EAAES,IAFR;AAGVR,QAAAA,MAAM,EAAE;AAHE,OAAd;AAKA,WAAKL,YAAL;AACH,KAlBD;AAmBH;;AAEDgB,EAAAA,MAAM,GAAG;AACL,QAAI,KAAKd,KAAL,CAAWG,MAAf,EAAuB;AACnB,0BACI,oBAAC,SAAD,CAAW,QAAX;AACI,QAAA,KAAK,EAAI;AACLQ,UAAAA,IAAI,EAAE,KAAKX,KAAL,CAAWC;AADZ,SADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKK,KAAKJ,KAAL,CAAWkB,QALhB,CADJ;AASH,KAVD,MAWK;AACD,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,CADJ;AAKH;AACJ;;AApDoC;;AAuDzC,eAAerB,UAAf","sourcesContent":["import React from 'react';\nimport MyContext from './my_context.js';\n\n\n\n\nconst api = '/get-products'\n\nlet recur_foo = (num, data_list, data_dict) => {\n    if (num <= 0) {\n        return data_dict\n    }\n\n    var temp_l = []\n    var key = data_list[num-1]['b']\n\n    data_list.forEach(\n        i => {\n            if (i.pm === key) {\n                temp_l.push(i.b)\n            }\n        }\n    )\n\n    data_dict[key] = temp_l\n    num -= 1\n    return recur_foo(num, data_list, data_dict)\n}\n\nclass MyProvider extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handle_click = props.callback\n        this.state = {\n            market_data: [],\n            market_structure: [],\n            loaded: false\n        };\n    }\n\n    componentDidMount() {\n        fetch(api)\n        .then(\n            res => {\n                return res.json()\n            }\n        )\n        .then((output) => {\n            var api_data = output.data\n            var num = api_data.length\n            var data_list = api_data\n            var data_dict = {}\n            var data = recur_foo(num, data_list, data_dict)\n            this.setState({\n                market_data: api_data,\n                market_structure: data,\n                loaded: true\n            })\n            this.handle_click\n        })\n    }\n\n    render() {\n        if (this.state.loaded) {\n            return (\n                <MyContext.Provider\n                    value = {{\n                        data: this.state.market_data\n                    }}\n                >\n                    {this.props.children}\n                </MyContext.Provider>\n            );\n        }\n        else {\n            return (\n                <div>\n                    <h1> Loading ... </h1>\n                </div>\n            );\n        }\n    }\n}\n\nexport default MyProvider;"]},"metadata":{},"sourceType":"module"}